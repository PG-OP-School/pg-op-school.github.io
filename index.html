<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The OASIS Weather</title>
  <link href="https://fonts.googleapis.com/css2?family=LXGW+Marker+Gothic&display=swap" rel="stylesheet">
  <script src="https://climateclock.world/widget-v2.js" async></script>
  <style>
    body {
      font-family: 'LXGW Marker Gothic', sans-serif;
      background: #0f0f0f;
      color: white !important;
      backdrop-filter: blur(12px);
      min-height: 100vh;
      overflow-x: hidden;
    }

    .card {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
      padding: 1rem;
      border-radius: 1rem;
      min-width: 280px;
      min-height: 150px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      animation: glowCard 4s infinite alternate !important;
      margin: 20px;
    }

    .main {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 1rem;
    }

    button {
      background-color: #BDB2FF;
      border: none;
      color: #000;
      padding: 10px 20px;
      border-radius: 999px;
      cursor: pointer;
      transition: all 0.25s ease-in-out;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
    }

    button:hover {
      background-color: #A0C4FF;
      transform: translateY(-2px);
    }

    h3 {
      background: linear-gradient(90deg, #00f0ff, #ff00f0) !important;
      background-clip: text !important;
      -webkit-background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
      animation: glow 4s infinite alternate !important;
    }

    @keyframes glow {
      0% {
        text-shadow: 0 0 10px #00f0ff;
      }

      100% {
        text-shadow: 0 0 20px #ff00f0;
      }
    }

    @keyframes glowCard {
      0% {
        box-shadow: 0 0 5px #00f0ff, 0 0 10px #00f0ff;
        border-color: #00f0ff;
      }

      50% {
        box-shadow: 0 0 15px #ff00f0, 0 0 25px #ff00f0;
        border-color: #ff00f0;
      }

      100% {
        box-shadow: 0 0 5px #00f0ff, 0 0 10px #00f0ff;
        border-color: #00f0ff;
      }
    }
  </style>
</head>

<body>
  <climate-clock></climate-clock>

  <div class="main">
    <div class="card" id="temperature">
      <h3>Temperature</h3>
      <h4 id="tempLabel">Loading...</h4>
    </div>

    <div class="card" id="rainfall">
      <h3>Rainfall</h3>
      <h4 id="rfLabel">Loading...</h4>
    </div>
  </div>

  <div class="main">
    <div class="card" id="humidity">
      <h3>Humidity</h3>
      <h4 id="humLabel">Loading...</h4>
    </div>

    <div class="card" id="daynight">
      <h3>Day or night?</h3>
      <h4 id="dnLabel">Loading...</h4>
    </div>
  </div>

  <script>
    const channelID = "3115326";
    const readAPIKey = "LKMK53OS3R7P7IFI"; // Replace this!
    
    const url = `https://api.thingspeak.com/channels/${channelID}/feeds/last.json?api_key=${readAPIKey}`;

    async function fetchAndUpdate() {
      try {
        const response = await fetch(url);
        const data = await response.json();

        console.log(data);

        document.getElementById("tempLabel").textContent = `${data.field1} Â°C`;
        document.getElementById("humLabel").textContent = `${data.field2} mm`;
        if(data.field4<1024)
      {
        document.getElementById("rfLabel").textContent = `It is raining`;
      }
      else 
      {
        document.getElementById("rfLabel").textContent = `It is not raining`;
      }
      if(data.field3==1){
        document.getElementById("dnLabel").textContent = `It is day`;
      }
      else if(data.field3==0) {
        document.getElementById("dnLabel").textContent = `It is night`;
      }
      } catch (error) {
        console.error("Error fetching ThingSpeak data:", error);
      }
    }

    fetchAndUpdate();
    setInterval(fetchAndUpdate, 3000); // refresh every 15s
  </script>
</body>

</html>


